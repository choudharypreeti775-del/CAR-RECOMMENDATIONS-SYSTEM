<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Car Recommendation System </title>
    <style>
        /* ---------- User-friendly CSS ---------- */
        
         :root {
            --bg1: #0f172a;
            --bg2: #0b2545;
            --accent: #ff7f50;
            --card: #0b1220;
            --glass: rgba(255, 255, 255, 0.04);
        }
        
        * {
            box-sizing: border-box
        }
        
        html,
        body {
            height: 100%;
            margin: 0;
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        }
        
        body {
            background: radial-gradient(circle at 10% 10%, rgba(14, 60, 110, 0.9), transparent 30%), linear-gradient(135deg, var(--bg1), var(--bg2));
            color: #e6eef8;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            padding: 28px;
        }
        
        .wrap {
            max-width: 1100px;
            margin: 0 auto;
        }
        
        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        header h1 {
            font-size: 1.5rem;
            margin: 0;
            letter-spacing: 0.4px;
            color: #fff
        }
        
        header p {
            margin: 0;
            opacity: 0.85;
            font-size: 0.95rem
        }
        
        .card {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
            border: 1px solid rgba(255, 255, 255, 0.04);
            padding: 18px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(2, 6, 23, 0.6);
        }
        /* Filters */
        
        .filters {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .filter {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        label {
            font-size: 0.85rem;
            color: #cfe7ff
        }
        
        select,
        input {
            background: var(--card);
            border: 1px solid rgba(255, 255, 255, 0.03);
            padding: 10px 12px;
            border-radius: 8px;
            color: #e6eef8;
            outline: none;
        }
        
        input[type=number] {
            -moz-appearance: textfield
        }
        
        .actions {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-top: 6px
        }
        
        button.btn {
            background: linear-gradient(90deg, var(--accent), #ff6347);
            color: #fff;
            padding: 10px 14px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            box-shadow: 0 6px 18px rgba(255, 127, 80, 0.12);
        }
        
        button.ghost {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.06);
            color: #e6eef8;
            padding: 9px 12px;
            border-radius: 10px;
            cursor: pointer;
        }
        /* Summary */
        
        .summary {
            display: flex;
            gap: 12px;
            align-items: center;
            margin: 14px 0 18px;
            flex-wrap: wrap;
        }
        
        .summary .pill {
            background: var(--glass);
            padding: 8px 12px;
            border-radius: 999px;
            font-size: 0.9rem;
        }
        /* Results */
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 14px;
        }
        
        .car {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
            border-radius: 12px;
            padding: 14px;
            border: 1px solid rgba(255, 255, 255, 0.03);
            transition: transform .18s ease, box-shadow .18s;
        }
        
        .car:hover {
            transform: translateY(-6px);
            box-shadow: 0 18px 40px rgba(2, 6, 23, 0.6);
        }
        
        .car h3 {
            margin: 0 0 6px;
            color: #fff;
            font-size: 1.05rem
        }
        
        .meta {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            font-size: 0.86rem;
            color: #cfe7ff;
            margin-bottom: 8px
        }
        
        .meta span {
            background: rgba(255, 255, 255, 0.03);
            padding: 6px 8px;
            border-radius: 8px
        }
        
        .specs {
            font-size: 0.92rem;
            color: #d7eaff
        }
        
        .specs p {
            margin: 6px 0;
            opacity: 0.95
        }
        
        .price {
            margin-top: 8px;
            font-weight: 700;
            color: #ffd89b
        }
        /* Empty */
        
        .empty {
            text-align: center;
            padding: 40px 20px;
            color: #cfe7ff;
            opacity: 0.9
        }
        /* Pagination */
        
        .pager {
            display: flex;
            gap: 8px;
            justify-content: center;
            align-items: center;
            margin-top: 18px
        }
        
        .page-btn {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.04);
            padding: 8px 11px;
            border-radius: 8px;
            cursor: pointer;
            color: #e6eef8
        }
        
        .page-btn.active {
            background: var(--accent);
            color: #0b1220;
            border: none
        }
        /* Responsive */
        
        @media (max-width:920px) {
            .filters {
                grid-template-columns: repeat(2, 1fr)
            }
        }
        
        @media (max-width:640px) {
            .filters {
                grid-template-columns: 1fr
            }
            header {
                flex-direction: column;
                align-items: flex-start
            }
        }
    </style>
</head>

<body>
    <div class="wrap">
        <header>
            <div>
                <h1>Car Recommendation System</h1>
                <p>Filter — sort — find the best matches from the dataset</p>
            </div>
            <div style="text-align:right">
                <div class="pill" style="background:transparent;color:#cfe7ff;font-size:0.92rem"></div>
            </div>
        </header>

        <div class="card">
            <div class="filters" id="filters">
                <div class="filter">
                    <label for="brand">Brand</label>
                    <select id="brand"><option value="">All</option></select>
                </div>

                <div class="filter">
                    <label for="fuel">Fuel</label>
                    <select id="fuel"><option value="">All</option><option>Petrol</option><option>Diesel</option><option>Hybrid</option><option>Electric</option><option>Hydrogen</option></select>
                </div>

                <div class="filter">
                    <label for="body">Body Type</label>
                    <select id="body"><option value="">All</option></select>
                </div>

                <div class="filter">
                    <label for="transmission">Transmission</label>
                    <select id="transmission"><option value="">All</option><option>Automatic</option><option>Manual</option></select>
                </div>

                <div class="filter">
                    <label for="minPrice">Min Price (₹)</label>
                    <input type="number" id="minPrice" placeholder="0" />
                </div>

                <div class="filter">
                    <label for="maxPrice">Max Price (₹)</label>
                    <input type="number" id="maxPrice" placeholder="10000000" />
                </div>

                <div class="filter">
                    <label for="minSeating">Min Seating</label>
                    <input type="number" id="minSeating" placeholder="0" />
                </div>

                <div class="filter">
                    <label for="minSafety">Min Safety Rating</label>
                    <input type="number" id="minSafety" placeholder="0" min="0" max="5" />
                </div>

                <div class="filter">
                    <label for="q">Search model / feature</label>
                    <input type="text" id="q" placeholder="eg. Civic, Autopilot, Sunroof..." />
                </div>
            </div>

            <div class="actions" style="margin-top:12px;">
                <button class="btn" id="searchBtn">Search</button>
                <button class="ghost" id="resetBtn">Reset</button>

                <div style="margin-left:auto; display:flex; gap:8px; align-items:center;">
                    <label style="font-size:0.85rem;opacity:0.85">Sort</label>
                    <select id="sortBy" style="padding:8px 10px;border-radius:8px;background:var(--card);border:1px solid rgba(255,255,255,0.03);color:#e6eef8">
            <option value="">Relevance</option>
            <option value="price-asc">Price ↑</option>
            <option value="price-desc">Price ↓</option>
            <option value="safety-desc">Safety ↓</option>
            <option value="seating-desc">Seating ↓</option>
          </select>
                </div>
            </div>
        </div>

        <div style="height:18px"></div>

        <div class="summary"></div>

        <div id="resultsContainer">
            <div id="results" class="results-grid"></div>
            <div class="pager" id="pager"></div>
        </div>
    </div>

    <script>
        /* ===================== CLEANED & COMPLETE DATASET (from your input) =====================
                                           I fixed formatting and completed the Maruti Ignis entry and ensured array is closed.
                                           This dataset is sufficient for demo (many models across 12+ brands).
                                           You may replace or extend CAR_DATA later.
                                        */
        const CAR_DATA = [{
                brand: "Toyota",
                model: "Corolla",
                fuel: "Petrol",
                body: "Sedan",
                features: ["AC", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 2000000
            }, {
                brand: "Toyota",
                model: "Camry",
                fuel: "Hybrid",
                body: "Sedan",
                features: ["AC", "Cruise Control"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 3000000
            }, {
                brand: "Toyota",
                model: "RAV4",
                fuel: "Diesel",
                body: "SUV",
                features: ["Sunroof", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 3500000
            }, {
                brand: "Toyota",
                model: "Fortuner",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "GPS"],
                safety: 5,
                seating: 7,
                transmission: "Automatic",
                price: 4500000
            }, {
                brand: "Toyota",
                model: "Yaris",
                fuel: "Petrol",
                body: "Hatchback",
                features: ["AC", "Bluetooth"],
                safety: 4,
                seating: 5,
                transmission: "Manual",
                price: 1800000
            }, {
                brand: "Toyota",
                model: "Innova",
                fuel: "Diesel",
                body: "MPV",
                features: ["AC", "Music System"],
                safety: 5,
                seating: 7,
                transmission: "Manual",
                price: 3200000
            }, {
                brand: "Toyota",
                model: "Hilux",
                fuel: "Diesel",
                body: "Pickup",
                features: ["AC", "GPS"],
                safety: 4,
                seating: 2,
                transmission: "Manual",
                price: 4000000
            }, {
                brand: "Toyota",
                model: "Prius",
                fuel: "Hybrid",
                body: "Hatchback",
                features: ["AC", "Cruise Control"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 2800000
            }, {
                brand: "Toyota",
                model: "Supra",
                fuel: "Petrol",
                body: "Sports",
                features: ["AC", "Sport Mode"],
                safety: 5,
                seating: 2,
                transmission: "Manual",
                price: 5500000
            }, {
                brand: "Toyota",
                model: "C-HR",
                fuel: "Hybrid",
                body: "SUV",
                features: ["AC", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 3700000
            },

            {
                brand: "Honda",
                model: "Civic",
                fuel: "Petrol",
                body: "Sedan",
                features: ["AC", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Manual",
                price: 2200000
            }, {
                brand: "Honda",
                model: "City",
                fuel: "Petrol",
                body: "Sedan",
                features: ["AC", "Cruise Control"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 1800000
            }, {
                brand: "Honda",
                model: "CR-V",
                fuel: "Diesel",
                body: "SUV",
                features: ["Sunroof", "GPS"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 3200000
            }, {
                brand: "Honda",
                model: "HR-V",
                fuel: "Petrol",
                body: "SUV",
                features: ["AC", "Music System"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 2700000
            }, {
                brand: "Honda",
                model: "Jazz",
                fuel: "Petrol",
                body: "Hatchback",
                features: ["AC", "Bluetooth"],
                safety: 4,
                seating: 5,
                transmission: "Manual",
                price: 1500000
            }, {
                brand: "Honda",
                model: "Accord",
                fuel: "Hybrid",
                body: "Sedan",
                features: ["AC", "Cruise Control"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 3500000
            }, {
                brand: "Honda",
                model: "Amaze",
                fuel: "Diesel",
                body: "Sedan",
                features: ["AC", "Music System"],
                safety: 4,
                seating: 5,
                transmission: "Manual",
                price: 1200000
            }, {
                brand: "Honda",
                model: "WR-V",
                fuel: "Petrol",
                body: "SUV",
                features: ["AC", "Bluetooth"],
                safety: 4,
                seating: 5,
                transmission: "Manual",
                price: 2000000
            }, {
                brand: "Honda",
                model: "NSX",
                fuel: "Petrol",
                body: "Sports",
                features: ["AC", "Sport Mode"],
                safety: 5,
                seating: 2,
                transmission: "Manual",
                price: 15000000
            }, {
                brand: "Honda",
                model: "Pilot",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "GPS"],
                safety: 5,
                seating: 7,
                transmission: "Automatic",
                price: 4500000
            },

            {
                brand: "Tesla",
                model: "Model S",
                fuel: "Electric",
                body: "Sedan",
                features: ["Autopilot", "Touchscreen"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 9000000
            }, {
                brand: "Tesla",
                model: "Model 3",
                fuel: "Electric",
                body: "Sedan",
                features: ["Autopilot", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 4000000
            }, {
                brand: "Tesla",
                model: "Model X",
                fuel: "Electric",
                body: "SUV",
                features: ["Falcon Doors", "Autopilot"],
                safety: 5,
                seating: 7,
                transmission: "Automatic",
                price: 9500000
            }, {
                brand: "Tesla",
                model: "Model Y",
                fuel: "Electric",
                body: "SUV",
                features: ["Autopilot", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 5000000
            }, {
                brand: "Tesla",
                model: "Cybertruck",
                fuel: "Electric",
                body: "Pickup",
                features: ["Armored Body", "Autopilot"],
                safety: 5,
                seating: 6,
                transmission: "Automatic",
                price: 7000000
            }, {
                brand: "Tesla",
                model: "Roadster",
                fuel: "Electric",
                body: "Sports",
                features: ["Autopilot", "Sport Mode"],
                safety: 5,
                seating: 2,
                transmission: "Automatic",
                price: 20000000
            }, {
                brand: "Tesla",
                model: "Semi",
                fuel: "Electric",
                body: "Truck",
                features: ["Autopilot", "GPS"],
                safety: 5,
                seating: 2,
                transmission: "Automatic",
                price: 15000000
            }, {
                brand: "Tesla",
                model: "Model 2",
                fuel: "Electric",
                body: "Hatchback",
                features: ["Autopilot", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 2500000
            }, {
                brand: "Tesla",
                model: "Model Q",
                fuel: "Electric",
                body: "SUV",
                features: ["Autopilot", "Music System"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 6000000
            }, {
                brand: "Tesla",
                model: "Model Z",
                fuel: "Electric",
                body: "Sedan",
                features: ["Autopilot", "Cruise Control"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 4500000
            },

            {
                brand: "BMW",
                model: "X1",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "Cruise Control"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 3500000
            }, {
                brand: "BMW",
                model: "X3",
                fuel: "Diesel",
                body: "SUV",
                features: ["Sunroof", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 4500000
            }, {
                brand: "BMW",
                model: "X5",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "GPS"],
                safety: 5,
                seating: 7,
                transmission: "Automatic",
                price: 6000000
            }, {
                brand: "BMW",
                model: "3 Series",
                fuel: "Petrol",
                body: "Sedan",
                features: ["AC", "Music System"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 4000000
            }, {
                brand: "BMW",
                model: "5 Series",
                fuel: "Hybrid",
                body: "Sedan",
                features: ["AC", "Cruise Control"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 5500000
            }, {
                brand: "BMW",
                model: "7 Series",
                fuel: "Petrol",
                body: "Sedan",
                features: ["AC", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 8000000
            }, {
                brand: "BMW",
                model: "Z4",
                fuel: "Petrol",
                body: "Sports",
                features: ["Sport Mode", "AC"],
                safety: 5,
                seating: 2,
                transmission: "Manual",
                price: 7000000
            }, {
                brand: "BMW",
                model: "i3",
                fuel: "Electric",
                body: "Hatchback",
                features: ["AC", "Touchscreen"],
                safety: 5,
                seating: 4,
                transmission: "Automatic",
                price: 4500000
            }, {
                brand: "BMW",
                model: "i8",
                fuel: "Hybrid",
                body: "Sports",
                features: ["Sport Mode", "AC"],
                safety: 5,
                seating: 2,
                transmission: "Automatic",
                price: 14000000
            }, {
                brand: "BMW",
                model: "X6",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "GPS"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 6500000
            },

            {
                brand: "Audi",
                model: "A3",
                fuel: "Petrol",
                body: "Sedan",
                features: ["AC", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Manual",
                price: 3000000
            }, {
                brand: "Audi",
                model: "A4",
                fuel: "Diesel",
                body: "Sedan",
                features: ["AC", "Cruise Control"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 4000000
            }, {
                brand: "Audi",
                model: "A6",
                fuel: "Diesel",
                body: "Sedan",
                features: ["AC", "GPS"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 5500000
            }, {
                brand: "Audi",
                model: "Q3",
                fuel: "Petrol",
                body: "SUV",
                features: ["AC", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 3500000
            }, {
                brand: "Audi",
                model: "Q5",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "Cruise Control"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 4500000
            }, {
                brand: "Audi",
                model: "Q7",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "GPS"],
                safety: 5,
                seating: 7,
                transmission: "Automatic",
                price: 6000000
            }, {
                brand: "Audi",
                model: "R8",
                fuel: "Petrol",
                body: "Sports",
                features: ["Sport Mode", "AC"],
                safety: 5,
                seating: 2,
                transmission: "Manual",
                price: 16000000
            }, {
                brand: "Audi",
                model: "TT",
                fuel: "Petrol",
                body: "Sports",
                features: ["AC", "Bluetooth"],
                safety: 5,
                seating: 2,
                transmission: "Manual",
                price: 6500000
            }, {
                brand: "Audi",
                model: "e-tron",
                fuel: "Electric",
                body: "SUV",
                features: ["AC", "Autopilot"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 7500000
            }, {
                brand: "Audi",
                model: "Q8",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "GPS"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 9000000
            },

            {
                brand: "Mercedes",
                model: "C-Class",
                fuel: "Petrol",
                body: "Sedan",
                features: ["AC", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 4000000
            }, {
                brand: "Mercedes",
                model: "E-Class",
                fuel: "Diesel",
                body: "Sedan",
                features: ["AC", "Cruise Control"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 5500000
            }, {
                brand: "Mercedes",
                model: "S-Class",
                fuel: "Hybrid",
                body: "Sedan",
                features: ["AC", "GPS"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 9000000
            }, {
                brand: "Mercedes",
                model: "GLA",
                fuel: "Petrol",
                body: "SUV",
                features: ["AC", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 3500000
            }, {
                brand: "Mercedes",
                model: "GLC",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "Cruise Control"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 4500000
            }, {
                brand: "Mercedes",
                model: "GLE",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "GPS"],
                safety: 5,
                seating: 7,
                transmission: "Automatic",
                price: 6000000
            }, {
                brand: "Mercedes",
                model: "AMG GT",
                fuel: "Petrol",
                body: "Sports",
                features: ["Sport Mode", "AC"],
                safety: 5,
                seating: 2,
                transmission: "Manual",
                price: 15000000
            }, {
                brand: "Mercedes",
                model: "B-Class",
                fuel: "Petrol",
                body: "Hatchback",
                features: ["AC", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 2500000
            }, {
                brand: "Mercedes",
                model: "EQC",
                fuel: "Electric",
                body: "SUV",
                features: ["Autopilot", "AC"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 7000000
            }, {
                brand: "Mercedes",
                model: "V-Class",
                fuel: "Diesel",
                body: "MPV",
                features: ["AC", "GPS"],
                safety: 5,
                seating: 7,
                transmission: "Automatic",
                price: 5000000
            },

            {
                brand: "Kia",
                model: "Seltos",
                fuel: "Petrol",
                body: "SUV",
                features: ["AC", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 1800000
            }, {
                brand: "Kia",
                model: "Sonet",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "Cruise Control"],
                safety: 5,
                seating: 5,
                transmission: "Manual",
                price: 1500000
            }, {
                brand: "Kia",
                model: "Carnival",
                fuel: "Petrol",
                body: "MPV",
                features: ["AC", "GPS"],
                safety: 5,
                seating: 7,
                transmission: "Automatic",
                price: 3500000
            }, {
                brand: "Kia",
                model: "Stinger",
                fuel: "Petrol",
                body: "Sports",
                features: ["Sport Mode", "AC"],
                safety: 5,
                seating: 5,
                transmission: "Manual",
                price: 5500000
            }, {
                brand: "Kia",
                model: "Telluride",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "Bluetooth"],
                safety: 5,
                seating: 7,
                transmission: "Automatic",
                price: 4000000
            }, {
                brand: "Kia",
                model: "EV6",
                fuel: "Electric",
                body: "SUV",
                features: ["Autopilot", "AC"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 4500000
            }, {
                brand: "Kia",
                model: "Picanto",
                fuel: "Petrol",
                body: "Hatchback",
                features: ["AC", "Bluetooth"],
                safety: 4,
                seating: 5,
                transmission: "Manual",
                price: 1200000
            }, {
                brand: "Kia",
                model: "K5",
                fuel: "Petrol",
                body: "Sedan",
                features: ["AC", "Cruise Control"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 2500000
            }, {
                brand: "Kia",
                model: "Mohave",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "GPS"],
                safety: 5,
                seating: 7,
                transmission: "Automatic",
                price: 5000000
            }, {
                brand: "Kia",
                model: "Sportage",
                fuel: "Petrol",
                body: "SUV",
                features: ["AC", "Music System"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 3000000
            },

            {
                brand: "Hyundai",
                model: "Creta",
                fuel: "Petrol",
                body: "SUV",
                features: ["AC", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 1900000
            }, {
                brand: "Hyundai",
                model: "Venue",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "Cruise Control"],
                safety: 5,
                seating: 5,
                transmission: "Manual",
                price: 1500000
            }, {
                brand: "Hyundai",
                model: "Tucson",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "GPS"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 3500000
            }, {
                brand: "Hyundai",
                model: "Elantra",
                fuel: "Petrol",
                body: "Sedan",
                features: ["AC", "Music System"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 2000000
            }, {
                brand: "Hyundai",
                model: "Sonata",
                fuel: "Hybrid",
                body: "Sedan",
                features: ["AC", "Cruise Control"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 3000000
            }, {
                brand: "Hyundai",
                model: "Kona",
                fuel: "Electric",
                body: "SUV",
                features: ["Autopilot", "AC"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 4000000
            }, {
                brand: "Hyundai",
                model: "i20",
                fuel: "Petrol",
                body: "Hatchback",
                features: ["AC", "Bluetooth"],
                safety: 4,
                seating: 5,
                transmission: "Manual",
                price: 1200000
            }, {
                brand: "Hyundai",
                model: "i10",
                fuel: "Petrol",
                body: "Hatchback",
                features: ["AC", "Music System"],
                safety: 4,
                seating: 5,
                transmission: "Manual",
                price: 1000000
            }, {
                brand: "Hyundai",
                model: "Santa Fe",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "GPS"],
                safety: 5,
                seating: 7,
                transmission: "Automatic",
                price: 4500000
            }, {
                brand: "Hyundai",
                model: "Nexo",
                fuel: "Hydrogen",
                body: "SUV",
                features: ["Autopilot", "AC"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 7000000
            },

            {
                brand: "Maruti",
                model: "Swift",
                fuel: "Petrol",
                body: "Hatchback",
                features: ["AC", "Bluetooth"],
                safety: 4,
                seating: 5,
                transmission: "Manual",
                price: 1000000
            }, {
                brand: "Maruti",
                model: "Dzire",
                fuel: "Petrol",
                body: "Sedan",
                features: ["AC", "Music System"],
                safety: 4,
                seating: 5,
                transmission: "Manual",
                price: 1200000
            }, {
                brand: "Maruti",
                model: "Ertiga",
                fuel: "Diesel",
                body: "MPV",
                features: ["AC", "Bluetooth"],
                safety: 5,
                seating: 7,
                transmission: "Manual",
                price: 1500000
            }, {
                brand: "Maruti",
                model: "Baleno",
                fuel: "Petrol",
                body: "Hatchback",
                features: ["AC", "Cruise Control"],
                safety: 4,
                seating: 5,
                transmission: "Manual",
                price: 1300000
            }, {
                brand: "Maruti",
                model: "Vitara Brezza",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Manual",
                price: 1800000
            }, {
                brand: "Maruti",
                model: "Celerio",
                fuel: "Petrol",
                body: "Hatchback",
                features: ["AC", "Music System"],
                safety: 4,
                seating: 5,
                transmission: "Manual",
                price: 900000
            }, {
                brand: "Maruti",
                model: "Ignis",
                fuel: "Petrol",
                body: "Hatchback",
                features: ["AC", "Bluetooth"],
                safety: 4,
                seating: 5,
                transmission: "Manual",
                price: 950000
            }, {
                brand: "Maruti",
                model: "S-Cross",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "GPS"],
                safety: 5,
                seating: 5,
                transmission: "Manual",
                price: 1700000
            }, {
                brand: "Maruti",
                model: "Alto",
                fuel: "Petrol",
                body: "Hatchback",
                features: ["AC"],
                safety: 3,
                seating: 4,
                transmission: "Manual",
                price: 700000
            }, {
                brand: "Maruti",
                model: "Ciaz",
                fuel: "Petrol",
                body: "Sedan",
                features: ["AC", "Music System"],
                safety: 4,
                seating: 5,
                transmission: "Manual",
                price: 1400000
            },

            {
                brand: "Tata",
                model: "Nexon",
                fuel: "Petrol",
                body: "SUV",
                features: ["AC", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Manual",
                price: 1500000
            }, {
                brand: "Tata",
                model: "Nexon EV",
                fuel: "Electric",
                body: "SUV",
                features: ["AC", "Touchscreen"],
                safety: 5,
                seating: 5,
                transmission: "Automatic",
                price: 2500000
            }, {
                brand: "Tata",
                model: "Harrier",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "GPS"],
                safety: 5,
                seating: 5,
                transmission: "Manual",
                price: 3000000
            }, {
                brand: "Tata",
                model: "Altroz",
                fuel: "Petrol",
                body: "Hatchback",
                features: ["AC", "Bluetooth"],
                safety: 5,
                seating: 5,
                transmission: "Manual",
                price: 1200000
            }, {
                brand: "Tata",
                model: "Tiago",
                fuel: "Petrol",
                body: "Hatchback",
                features: ["AC"],
                safety: 4,
                seating: 5,
                transmission: "Manual",
                price: 900000
            }, {
                brand: "Tata",
                model: "Punch",
                fuel: "Petrol",
                body: "SUV",
                features: ["AC", "Music System"],
                safety: 5,
                seating: 5,
                transmission: "Manual",
                price: 1300000
            }, {
                brand: "Tata",
                model: "Safari",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "GPS"],
                safety: 5,
                seating: 7,
                transmission: "Automatic",
                price: 4000000
            }, {
                brand: "Tata",
                model: "Tigor",
                fuel: "Petrol",
                body: "Sedan",
                features: ["AC", "Bluetooth"],
                safety: 4,
                seating: 5,
                transmission: "Manual",
                price: 1100000
            }, {
                brand: "Tata",
                model: "Hexa",
                fuel: "Diesel",
                body: "SUV",
                features: ["AC", "Cruise Control"],
                safety: 5,
                seating: 7,
                transmission: "Manual",
                price: 3800000
            }, {
                brand: "Tata",
                model: "Buzz EV",
                fuel: "Electric",
                body: "MPV",
                features: ["Autopilot", "AC"],
                safety: 5,
                seating: 6,
                transmission: "Automatic",
                price: 4500000
            }
        ]; /* END CAR_DATA */

        /* ===================== App Logic ===================== */

        const state = {
            data: CAR_DATA.slice(),
            filtered: [],
            perPage: 12,
            page: 1
        };

        const ui = {
            brand: document.getElementById('brand'),
            fuel: document.getElementById('fuel'),
            body: document.getElementById('body'),
            transmission: document.getElementById('transmission'),
            minPrice: document.getElementById('minPrice'),
            maxPrice: document.getElementById('maxPrice'),
            minSeating: document.getElementById('minSeating'),
            minSafety: document.getElementById('minSafety'),
            q: document.getElementById('q'),
            searchBtn: document.getElementById('searchBtn'),
            resetBtn: document.getElementById('resetBtn'),
            sortBy: document.getElementById('sortBy'),
            results: document.getElementById('results'),
            summary: document.querySelector('.summary'),
            pager: document.getElementById('pager')
        };

        /* Populate dynamic selects (brand and body types) */
        function populateSelects() {
            const brands = Array.from(new Set(state.data.map(d => d.brand))).sort();
            brands.forEach(b => {
                const opt = document.createElement('option');
                opt.value = b;
                opt.textContent = b;
                ui.brand.appendChild(opt);
            });
            const bodies = Array.from(new Set(state.data.map(d => d.body))).sort();
            bodies.forEach(b => {
                const opt = document.createElement('option');
                opt.value = b;
                opt.textContent = b;
                ui.body.appendChild(opt);
            });
        }
        populateSelects();

        /* Apply filters */
        function applyFilters() {
            const brand = ui.brand.value;
            const fuel = ui.fuel.value;
            const body = ui.body.value;
            const transmission = ui.transmission.value;
            const minPrice = parseInt(ui.minPrice.value) || 0;
            const maxPrice = parseInt(ui.maxPrice.value) || Number.MAX_SAFE_INTEGER;
            const minSeating = parseInt(ui.minSeating.value) || 0;
            const minSafety = parseInt(ui.minSafety.value) || 0;
            const q = (ui.q.value || '').toLowerCase().trim();
            const sortBy = ui.sortBy.value;

            let out = state.data.filter(car => {
                if (brand && car.brand !== brand) return false;
                if (fuel && car.fuel !== fuel) return false;
                if (body && car.body !== body) return false;
                if (transmission && car.transmission !== transmission) return false;
                if (car.price < minPrice || car.price > maxPrice) return false;
                if (car.seating < minSeating) return false;
                if (car.safety < minSafety) return false;
                if (q) {
                    const hay = `${car.brand} ${car.model} ${car.features.join(' ')} ${car.body}`.toLowerCase();
                    if (!hay.includes(q)) return false;
                }
                return true;
            });

            // Sorting
            if (sortBy === 'price-asc') out.sort((a, b) => a.price - b.price);
            else if (sortBy === 'price-desc') out.sort((a, b) => b.price - a.price);
            else if (sortBy === 'safety-desc') out.sort((a, b) => b.safety - b.safety ? b.safety - a.safety : a.price - b.price);
            else if (sortBy === 'seating-desc') out.sort((a, b) => b.seating - a.seating);

            state.filtered = out;
            state.page = 1;
            renderSummary();
            renderPage();
        }

        /* Render summary */
        function renderSummary() {
            const total = state.filtered.length;
            ui.summary.innerHTML = `
    <div class="pill" style="background:transparent;color:#cfe7ff">Matches: <strong>${total}</strong></div>
    <div class="pill" style="background:transparent;color:#cfe7ff">Showing ${Math.min(state.perPage, total)} per page</div>
  `;
        }

        /* Render page results */
        function renderPage() {
            const start = (state.page - 1) * state.perPage;
            const pageItems = state.filtered.slice(start, start + state.perPage);
            ui.results.innerHTML = '';

            if (pageItems.length === 0) {
                ui.results.innerHTML = `<div class="empty card"><h3>No matches</h3><p>Try resetting filters or using different keywords.</p></div>`;
                ui.pager.innerHTML = '';
                return;
            }

            pageItems.forEach(car => {
                const el = document.createElement('div');
                el.className = 'car card';
                el.innerHTML = `
      <h3>${escapeHtml(car.brand)} ${escapeHtml(car.model)}</h3>
      <div class="meta">
        <span>${escapeHtml(car.body)}</span>
        <span>${escapeHtml(car.fuel)}</span>
        <span>${escapeHtml(car.transmission)}</span>
        <span>${escapeHtml(car.seating)} seats</span>
      </div>
      <div class="specs">
        <p><strong>Features:</strong> ${escapeHtml(car.features.join(', '))}</p>
        <p><strong>Safety:</strong> ${car.safety} / 5</p>
        <p class="price">₹ ${numberWithCommas(car.price)}</p>
      </div>
    `;
                ui.results.appendChild(el);
            });

            renderPager();
        }

        /* Pagination */
        function renderPager() {
            const total = state.filtered.length;
            const pages = Math.ceil(total / state.perPage);
            ui.pager.innerHTML = '';
            if (pages <= 1) return;

            const createBtn = (label, page, active = false) => {
                const b = document.createElement('button');
                b.className = 'page-btn' + (active ? ' active' : '');
                b.textContent = label;
                b.onclick = () => {
                    state.page = page;
                    renderPage();
                    window.scrollTo({
                        top: 200,
                        behavior: 'smooth'
                    });
                };
                return b;
            };

            // prev
            if (state.page > 1) ui.pager.appendChild(createBtn('Prev', state.page - 1));
            // pages (show max 7)
            const range = getPageRange(state.page, pages, 7);
            range.forEach(p => ui.pager.appendChild(createBtn(p, p, p === state.page)));
            if (state.page < pages) ui.pager.appendChild(createBtn('Next', state.page + 1));
        }

        /* helpers */
        function getPageRange(cur, total, maxLength) {
            const half = Math.floor(maxLength / 2);
            let start = Math.max(1, cur - half);
            let end = Math.min(total, cur + half);
            if (end - start + 1 < maxLength) {
                if (start === 1) end = Math.min(total, start + maxLength - 1);
                else if (end === total) start = Math.max(1, end - maxLength + 1);
            }
            const out = [];
            for (let i = start; i <= end; i++) out.push(i);
            return out;
        }

        function numberWithCommas(x) {
            return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        function escapeHtml(str) {
            return String(str).replace(/[&<>"'`]/g, s => ({
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#39;',
                '`': '&#96;'
            }[s]));
        }

        /* Reset */
        function resetFilters() {
            ui.brand.value = '';
            ui.fuel.value = '';
            ui.body.value = '';
            ui.transmission.value = '';
            ui.minPrice.value = '';
            ui.maxPrice.value = '';
            ui.minSeating.value = '';
            ui.minSafety.value = '';
            ui.q.value = '';
            ui.sortBy.value = '';
            state.filtered = state.data.slice();
            state.page = 1;
            renderSummary();
            renderPage();
        }

        /* initial */
        state.filtered = state.data.slice();
        renderSummary();
        renderPage();

        /* events */
        ui.searchBtn.addEventListener('click', applyFilters);
        ui.resetBtn.addEventListener('click', resetFilters);
        ui.sortBy.addEventListener('change', applyFilters);
        ui.q.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                applyFilters();
            }
        });

        /* keyboard: Enter on form fields triggers search */
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'SELECT')) {
                e.preventDefault();
                applyFilters();
            }
        });
    </script>
</body>

</html>
